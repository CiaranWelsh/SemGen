<!DOCTYPE html>
	<head>
		<meta charset="utf-8">

		<script src="js/lib/jquery-2.1.1.min.js"></script>
		<script src="js/lib/d3.v3.min.js"></script>
		<script src="js/lib/bootstrap.min.js"></script>
		<script src="js/definitions.js"></script>
		<script src="js/classExtensions.js"></script>

		<script src="js/keyElement.js"></script>
		<script src="js/nodes/hiddenLabelNode.js"></script>
		<script src="js/nodes/node.js"></script>
		<script src="js/nodes/dependencyNode.js"></script>
		<script src="js/nodes/parentNode.js"></script>
		<script src="js/nodes/modelNode.js"></script>
		<script src="js/nodes/submodelNode.js"></script>
		<script src="js/nodes/physiomapNode.js"></script>
		<script src="js/nodes/behaviors/dragToMerge.js"></script>
		<script src="js/nodes/behaviors/hull.js"></script>
		<script src="js/nodes/behaviors/hiddenLabelNodeGenerator.js"></script>
		<script src="js/nodes/behaviors/parentNodeDrag.js"></script>
		<script src="js/links/link.js"></script>
		<script src="js/links/mediatorLink.js"></script>

		<script src="js/leftSidebar.js"></script>
		<script src="js/rightSidebar.js"></script>
		<script src="js/graph.js"></script>
		<script src="js/taskprototype.js"></script>
		<script src="js/nodes/behaviors/parentNodeDrag.js"></script>
		<script src="js/links/link.js"></script>
		<script src="js/links/mediatorLink.js"></script>
		<script src="js/stage.js"></script>
		<script src="js/main.js"></script>

		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
		<link type="text/css" rel="stylesheet" href="css/stage.css" />
		<link type="text/css" rel="stylesheet" href="css/graph.css" />
		<link type="text/css" rel="stylesheet" href="css/leftSidebar.css" />
		<link type="text/css" rel="stylesheet" href="css/rightSidebar.css" />
		<link type="text/css" rel="stylesheet" href="css/merger.css" />

		<!--  Loads a mock sender and receiver if we're loading outside of SemGen -->
		<script src="js/mock.js"></script>
	</head>
	<body>
		<div id="addModelButton" class="btn-default">+</div>

		<div id="mergerDemoBtn" class="btn-primary" data-toggle='modal' href='#mergerModal'>Merger demo</div>

		<div class="stageSearch">
			<div class="searchIcon">
				<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 300 300">
					<title>search icon</title>
					<defs>
					<linearGradient id="linearGradient12975">
						<stop stop-color="#ffffff" id="stop12977" offset="0"/>
						<stop stop-color="#d2d5d8" id="stop12979" offset="1"/>
					</linearGradient>
					<linearGradient y2="1.236288" x2="0.162791" y1="0.166667" x1="0.5" id="linearGradient12981" xlink:href="#linearGradient12975"/>
					</defs>
					<metadata id="metadata12220">image/svg+xmlSergio Luiz Araujo Silvasearchiconsinformaticcomputer</metadata>
					<g>
						<title>Layer 1</title>
						<path fill="#454040" stroke-width="9.756173" id="path12423" d="m35.938999,35.085999c-43.272999,43.272003 -43.379,114.158997 -0.105988,157.432007c36.662991,36.663025 93.201992,42.25 135.920986,16.765991l76.343994,74.234985c10.506989,10.197998 27.084991,9.821045 37.116974,-0.843994c10.03302,-10.664978 9.77002,-27.445984 -0.737976,-37.643982l-75.182983,-72.864014c26.360992,-42.846985 21.007996,-100.044983 -16.028015,-137.080994c-43.27298,-43.273008 -114.054993,-43.273008 -157.327,0l0,0l0.000008,0zm31.738979,31.739014c26.10202,-26.102024 67.746033,-26.102024 93.848022,0c26.10199,26.10199 26.10199,67.745972 0,93.847961c-26.10199,26.102051 -67.746002,26.102051 -93.848022,0c-26.10199,-26.10199 -26.10199,-67.745972 0,-93.847961z"/>
					</g>
				</svg>
			</div>
			<div class="searchValueContainer">
				<input name="searchString" class="searchString" type="text" placeholder="Search for models">
				<ul class="searchResults"></ul>
			</div>
		</div>

		<!-- Sidebars -->
		<!-- Left Sidebar -->
		<div id="leftSidebar" class="panel panel-default sidebar">
			<div class="panel-heading">
				<a data-toggle="collapse" href="#leftmenu"><span class="caret-left"></span></a>
			</div>
			<div id="leftmenu" class="panel-collapse collapse in">
				<div class="panel-heading">
					<a data-toggle="collapse" href="#projmenu">Project<span class="caret"></span></a>
				</div>
				<div id="projmenu" class="panel-collapse collapse subpanel">
					<ul>
						<li><a id="addModel" href="#">Import Models</a></li>
						<li><a href="#">Project Models</a></li>
					</ul>
				</div>
				<div class="panel-heading">
					<a data-toggle="collapse" href="#modelmenu">Model Options<span class="caret"></span></a>
				</div>
				<div id="modelmenu" class="panel-collapse collapse subpanel">
					<div id="modelinfo" class="panel">
						No model selected
					</div>
				</div>
			</div>
		</div>

		<!-- Right Sidebar -->
		<div id="rightSidebar" class="panel panel-default sidebar on">
			<div class="panel-heading">
				<a data-toggle="collapse" href="#rightmenu"><span class="caret-left"></span></a>
			</div>
			<div id="rightmenu" class="panel-collapse collapse in">
				<div class="panel-heading">
					<a data-toggle="collapse" href="#stagemenu">Stage Options<span class="caret"></span></a>
				</div>
				<div id="stagemenu" class="panel-collapse collapse subpanel">
					<div id="stagekey">
						Node key:
						<ul class="visibleNodeKeys"></ul>
						<ul class="hiddenNodeKeys"></ul>
						Link key:
						<ul class="visibleLinkKeys"></ul>
						<ul class="hiddenLinkKeys"></ul>
					</div>
					<div id="modes">
						Graph:
						<ul>
							<li>
								<input type="checkbox" id="fixedNodes"> Fix Nodes</input>
							</li>
							<!--   <li>
								//<input type="checkbox" class="columnView"> Column View</input>
							</li>-->
						</ul>
					</div>
					<div id="d3opts">
						D3 Settings:
						<ul>
							<li>
								Node charge: <input type="number" id="nodecharge" value="-300">
							</li>
							<li>
								Friction: <input type="number" id="friction" value="0.7" max="1.0" min="0.1" step="0.1">
							</li>
							<li>
								Gravity: <input type="checkbox" id="gravity" value="">
							</li>
						</ul>
					</div>
				</div>
					<div class="panel-heading">
						<a data-toggle="collapse" href="#nodemenu">Node Options<span class="caret"></span></a>
					</div>
					<div id="nodemenu" class="panel-collapse collapse subpanel">
						<div class="panel-body">Information about selected node goes here</div>
					</div>
			</div>
		</div>

		<!-- Active Task Tray -->
		<div id="activeTaskTray"><span id="activeTaskText">Active Tasks</span></div>
		<div id="activeTaskPanel"></div>

		<!-- Merger mode modal -->
		<div id="mergerModal" class="modal fade" data-keyboard="false" data-backdrop="static">
			<div class="modal-dialog modal-lg">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title">New and improved merger coming soon!</h3>
					</div>
					<div class="modal-body">
						<div class="mergeResHeader">
							<!--TODO: Replace "Model A" and "Model B" with actual model names-->
							<h4 class="leftModelName">Pandit+Hinch</h4>
							<h4 class="rightModelName">Niederer</h4>
						</div>
						<!--TODO: Create each of these with actual merge resolution-->
						<div class="mergeResolution">
							<div class="radio leftResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Simulation time doamin</div>
									<div class="codeName">(environment.time)</div>
									<div class="equation">user-defined input</div>
									<svg class="leftNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#1F77B4 />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio">
								</label>
							</div>
							<button type="button" class="btn btn-primary mergePreviewBtn"
									data-toggle="tooltip" data-placement="bottom" title="Preview merge for this resolution point">Preview</button>
							<div class="radio rightResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Temporal solution domain</div>
									<div class="codeName">(environment.time)</div>
									<div class="equation">user-defined input</div>
									<svg class="rightNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#1F77B4 />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio">
								</label>
							</div>
						</div>
						<div class="mergeResolution">
							<div class="radio leftResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Concentration of troponin in cytosol</div>
									<div class="codeName">(intracellular_ion_concentrations.TRPN)</div>
									<div class="equation">d(TRPN)/dt = I_TRPN</div>
									<svg class="leftNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#1F77B4 />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio0">
								</label>
							</div>
							<button type="button" class="btn btn-primary mergePreviewBtn"
									data-toggle="tooltip" data-placement="bottom" title="Preview merge for this resolution point">Preview</button>
							<div class="radio rightResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Intracellular troponin concentration</div>
									<div class="codeName">(intracellular_ion_concentrations.TRPN)</div>
									<div class="equation">d(TRPN)/dt = J_TRPN</div>
									<svg class="rightNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#1F77B4 />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio0">
								</label>
							</div>
						</div>
						<div class="mergeResolution">
							<div class="radio leftResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Intracellular calcium (2+) concentration</div>
									<div class="codeName">(intracellular_ion_concentrations.Ca_i)</div>
									<div class="equation">d(Ca_i)/dt = beta_CMDN*(I_LCC+I_RyR-I_SERCA+I_SR+I_NaCa-I_pCa+I_CaB+I_TRPN)</div>
									<svg class="leftNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#2CA02C />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio1">
								</label>
							</div>
							<button type="button" class="btn btn-primary mergePreviewBtn"
									data-toggle="tooltip" data-placement="bottom" title="Preview merge for this resolution point">Preview</button>
							<div class="radio rightResolution" data-toggle="tooltip" data-placement="bottom" title="Resolve using this">
								<label>
									<div class="freeText">Intracellular calcium (2+) concentration</div>
									<div class="codeName">(intracellular_ion_concentrations.Ca_i)</div>
									<div class="equation">piecewise(1000*1.8433E-7, time < 1, 1000*(1.055*(time/1000)^3-0.03507*(time/1000)^2+0.0003992*time/1000-1.356E-6), (time >= 10) && (time < 15), 1000*(0.014*(time/1000)^3-0.002555*(time/1000)^2+0.0001494*time/1000-1.428E-6), (time >= 15) && (time < 55), 1000*(1.739E-5*(time/1000)^3-3.209E-6*(time/1000)^2-5.689E-6*time/1000+1.719E-6), (time >= 55) && (time < 250), 1000*(0.0001321*(time/1000)^4-0.0002197*(time/1000)^3+0.0001374*(time/1000)^2-3.895E-5*time/1000+4.441E-6), (time >= 250) && (time < 490), 1000*1.2148E-7)</div>
									<svg class="rightNode" height="10" width="10">
										<circle cx="5" cy="5" r="5" fill=#2CA02C />
									</svg>
									<input class="mergeResRadio" type="radio" name="mergeResRadio1">
								</label>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary fullMergePreviewBtn">Preview merge</button>
						<button type="button" class="btn btn-success merge">Merge!</button>
						<button id="quitMergerBtn" type="button" class="btn btn-default" data-dismiss="modal">Quit merge</button>
					</div>
				</div>

			</div>
		</div>

		<div id="stage"></div>
	</body>
</html>
