<<<<<<< HEAD
=======
/** 
 * Extends SwingWorker by automatically providing a SemGen Progress Bar
 * and adding some methods for using it.
 */

>>>>>>> master
package semgen.utilities;

import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
<<<<<<< HEAD
=======
import java.util.List;
>>>>>>> master

import javax.swing.SwingWorker;

import semgen.utilities.uicomponent.SemGenProgressBar;

<<<<<<< HEAD
public abstract class SemGenTask extends SwingWorker<Void, Void> implements PropertyChangeListener {
	protected SemGenProgressBar progframe = null;
	
	@Override
	protected abstract Void doInBackground() throws Exception;
	
=======
public abstract class SemGenTask extends SwingWorker<Void, String> implements PropertyChangeListener {
	protected SemGenProgressBar progframe = null;
	
>>>>>>> master
    @Override
    public void done() {
    	if (progframe!=null) progframe.dispose();
    	if (isCancelled()) return;
    	endTask();
    }

    public void endTask() {}

<<<<<<< HEAD
    public void progressUpdated(String update) {
    	firePropertyChange("status", new String(update), null);
    }
    
	@Override
	public void propertyChange(PropertyChangeEvent evt) {
		
		if (evt.getPropertyName() == "status") {
			progframe.updateMessage(evt.getNewValue().toString());
		}
		try {
			Thread.sleep(1);
		} catch (InterruptedException e) {
			e.printStackTrace();
=======
    public void progressUpdated(String update) {    	
    	firePropertyChange("status", new String(update), null);
    }
    
    @Override
    protected void process(List<String> chunks) {
		progframe.updateMessage(chunks.get(0));
    }
    
	@Override
	public void propertyChange(PropertyChangeEvent evt) {
		if (!isDone()) {
			publish(evt.getNewValue().toString());
>>>>>>> master
		}
	}
}
